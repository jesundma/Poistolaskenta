<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Projektin oikeuksien hallinta</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}">
</head>
<body>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <ul>
            {% for category, message in messages %}
                <li style="color: {% if category == 'error' %}red{% else %}green{% endif %};">
                    {{ message }}
                </li>
            {% endfor %}
        </ul>
        {% endif %}
    {% endwith %}

    <h1>Projektin {{ project_id }} oikeuksien hallinta</h1>

    <form method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">

        <table border="1" cellpadding="5">
            <thead>
                <tr>
                    <th>Käyttäjä</th>
                    <th>Muokkausoikeus</th>
                </tr>
            </thead>
                <tbody>
                    {% for user in users %}
                        <tr>
                            <td>{{ user.username }}</td>
                            <td>
                                {% if can_edit %}
                                    <input type="checkbox" name="can_modify_{{ user.id }}" {% if user.can_modify %}checked{% endif %}>
                                    {% else %}
                                    {% if user.can_modify %}✅{% else %}❌{% endif %}
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>        
        </table>

        {% if can_edit %}
            <br>
            <button type="submit">Tallenna muutokset</button>
        {% endif %}
    </form>

    <p><a href="{{ url_for('list_projects', page=1) }}">Takaisin projektilistaukseen</a></p>

</body>
</html>
