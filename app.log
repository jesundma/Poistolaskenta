2025-10-19 21:46:04,124 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-19 21:46:04,125 [INFO] [33mPress CTRL+C to quit[0m
2025-10-19 21:46:13,847 [INFO] GET /login took 0.0s
2025-10-19 21:46:13,849 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:13] "GET /login HTTP/1.1" 200 -
2025-10-19 21:46:16,680 [INFO] GET / took 0.06s
2025-10-19 21:46:16,680 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:16] "[32mGET / HTTP/1.1[0m" 302 -
2025-10-19 21:46:16,694 [INFO] GET /register took 0.01s
2025-10-19 21:46:16,694 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:16] "GET /register HTTP/1.1" 200 -
2025-10-19 21:46:16,970 [INFO] GET /static/css/forms.css took 0.01s
2025-10-19 21:46:16,970 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:16] "[36mGET /static/css/forms.css HTTP/1.1[0m" 304 -
2025-10-19 21:46:30,643 [INFO] POST /create took 0.11s
2025-10-19 21:46:30,644 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:30] "POST /create HTTP/1.1" 200 -
2025-10-19 21:46:30,927 [INFO] GET /static/css/forms.css took 0.0s
2025-10-19 21:46:30,927 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:30] "[36mGET /static/css/forms.css HTTP/1.1[0m" 304 -
2025-10-19 21:46:35,481 [INFO] GET /main_layout took 0.0s
2025-10-19 21:46:35,481 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:35] "GET /main_layout HTTP/1.1" 200 -
2025-10-19 21:46:35,501 [INFO] GET /static/css/main.css took 0.0s
2025-10-19 21:46:35,502 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:35] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 21:46:38,118 [INFO] GET /new_project took 0.02s
2025-10-19 21:46:38,119 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:38] "GET /new_project HTTP/1.1" 200 -
2025-10-19 21:46:38,141 [INFO] GET /static/css/forms.css took 0.0s
2025-10-19 21:46:38,142 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:38] "[36mGET /static/css/forms.css?v=1 HTTP/1.1[0m" 304 -
2025-10-19 21:46:48,093 [ERROR] Exception on /new_project [POST]
Traceback (most recent call last):
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/app.py", line 197, in new_project
    project_id = service_functions.insert_project(project_name, classes, user_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/service_functions.py", line 36, in insert_project
    execute(
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/db.py", line 20, in execute
    result = con.execute(sql, params)
             ^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: FOREIGN KEY constraint failed
2025-10-19 21:46:48,098 [INFO] POST /new_project took 0.06s
2025-10-19 21:46:48,099 [INFO] 127.0.0.1 - - [19/Oct/2025 21:46:48] "[35m[1mPOST /new_project HTTP/1.1[0m" 500 -
2025-10-19 22:06:31,378 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-19 22:06:31,378 [INFO] [33mPress CTRL+C to quit[0m
2025-10-19 22:06:36,876 [INFO] GET / took 0.01s
2025-10-19 22:06:36,876 [INFO] 127.0.0.1 - - [19/Oct/2025 22:06:36] "[32mGET / HTTP/1.1[0m" 302 -
2025-10-19 22:06:36,884 [INFO] GET /login took 0.0s
2025-10-19 22:06:36,885 [INFO] 127.0.0.1 - - [19/Oct/2025 22:06:36] "GET /login HTTP/1.1" 200 -
2025-10-19 22:06:47,332 [INFO] POST /login took 0.01s
2025-10-19 22:06:47,332 [INFO] 127.0.0.1 - - [19/Oct/2025 22:06:47] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-10-19 22:06:47,336 [INFO] GET /login took 0.0s
2025-10-19 22:06:47,337 [INFO] 127.0.0.1 - - [19/Oct/2025 22:06:47] "GET /login HTTP/1.1" 200 -
2025-10-19 22:06:57,250 [INFO] POST /login took 0.12s
2025-10-19 22:06:57,251 [INFO] 127.0.0.1 - - [19/Oct/2025 22:06:57] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-10-19 22:06:57,298 [INFO] GET /main_layout took 0.0s
2025-10-19 22:06:57,298 [INFO] 127.0.0.1 - - [19/Oct/2025 22:06:57] "GET /main_layout HTTP/1.1" 200 -
2025-10-19 22:06:57,524 [INFO] GET /static/css/main.css took 0.01s
2025-10-19 22:06:57,524 [INFO] 127.0.0.1 - - [19/Oct/2025 22:06:57] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 22:07:00,745 [INFO] GET /list_projects took 0.06s
2025-10-19 22:07:00,746 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:00] "GET /list_projects HTTP/1.1" 200 -
2025-10-19 22:07:05,199 [INFO] GET /main_layout took 0.0s
2025-10-19 22:07:05,199 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:05] "GET /main_layout HTTP/1.1" 200 -
2025-10-19 22:07:05,227 [INFO] GET /static/css/main.css took 0.0s
2025-10-19 22:07:05,228 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:05] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 22:07:06,856 [INFO] GET /new_project took 0.02s
2025-10-19 22:07:06,857 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:06] "GET /new_project HTTP/1.1" 200 -
2025-10-19 22:07:06,892 [INFO] GET /static/css/forms.css took 0.0s
2025-10-19 22:07:06,892 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:06] "[36mGET /static/css/forms.css?v=1 HTTP/1.1[0m" 304 -
2025-10-19 22:07:18,003 [INFO] POST /new_project took 0.05s
2025-10-19 22:07:18,004 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:18] "POST /new_project HTTP/1.1" 200 -
2025-10-19 22:07:18,025 [INFO] GET /static/css/main.css took 0.0s
2025-10-19 22:07:18,026 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:18] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 22:07:21,141 [INFO] GET /list_projects took 0.03s
2025-10-19 22:07:21,142 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:21] "GET /list_projects HTTP/1.1" 200 -
2025-10-19 22:07:29,305 [INFO] GET /main_layout took 0.0s
2025-10-19 22:07:29,306 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:29] "GET /main_layout HTTP/1.1" 200 -
2025-10-19 22:07:29,329 [INFO] GET /static/css/main.css took 0.0s
2025-10-19 22:07:29,329 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:29] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 22:07:32,977 [INFO] GET /register took 0.0s
2025-10-19 22:07:32,977 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:32] "GET /register HTTP/1.1" 200 -
2025-10-19 22:07:33,054 [INFO] GET /static/css/forms.css took 0.0s
2025-10-19 22:07:33,054 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:33] "[36mGET /static/css/forms.css HTTP/1.1[0m" 304 -
2025-10-19 22:07:53,225 [INFO] POST /create took 0.11s
2025-10-19 22:07:53,226 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:53] "POST /create HTTP/1.1" 200 -
2025-10-19 22:07:53,459 [INFO] GET /static/css/forms.css took 0.0s
2025-10-19 22:07:53,459 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:53] "[36mGET /static/css/forms.css HTTP/1.1[0m" 304 -
2025-10-19 22:07:59,562 [INFO] GET /main_layout took 0.0s
2025-10-19 22:07:59,563 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:59] "GET /main_layout HTTP/1.1" 200 -
2025-10-19 22:07:59,583 [INFO] GET /static/css/main.css took 0.0s
2025-10-19 22:07:59,583 [INFO] 127.0.0.1 - - [19/Oct/2025 22:07:59] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 22:08:01,251 [INFO] GET /logout took 0.0s
2025-10-19 22:08:01,251 [INFO] 127.0.0.1 - - [19/Oct/2025 22:08:01] "GET /logout HTTP/1.1" 200 -
2025-10-19 22:08:05,952 [INFO] GET /login took 0.0s
2025-10-19 22:08:05,952 [INFO] 127.0.0.1 - - [19/Oct/2025 22:08:05] "GET /login HTTP/1.1" 200 -
2025-10-19 22:15:07,889 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-19 22:15:07,889 [INFO] [33mPress CTRL+C to quit[0m
2025-10-19 22:15:12,631 [INFO] GET /login took 0.0s
2025-10-19 22:15:12,631 [INFO] 127.0.0.1 - - [19/Oct/2025 22:15:12] "GET /login HTTP/1.1" 200 -
2025-10-19 22:15:21,887 [INFO] GET /register took 0.0s
2025-10-19 22:15:21,888 [INFO] 127.0.0.1 - - [19/Oct/2025 22:15:21] "GET /register HTTP/1.1" 200 -
2025-10-19 22:15:21,956 [INFO] GET /static/css/forms.css took 0.0s
2025-10-19 22:15:21,957 [INFO] 127.0.0.1 - - [19/Oct/2025 22:15:21] "[36mGET /static/css/forms.css HTTP/1.1[0m" 304 -
2025-10-19 22:15:27,108 [INFO] GET /login took 0.0s
2025-10-19 22:15:27,108 [INFO] 127.0.0.1 - - [19/Oct/2025 22:15:27] "GET /login HTTP/1.1" 200 -
2025-10-19 22:15:29,512 [INFO] GET /register took 0.0s
2025-10-19 22:15:29,513 [INFO] 127.0.0.1 - - [19/Oct/2025 22:15:29] "GET /register HTTP/1.1" 200 -
2025-10-19 22:15:29,569 [INFO] GET /static/css/forms.css took 0.0s
2025-10-19 22:15:29,569 [INFO] 127.0.0.1 - - [19/Oct/2025 22:15:29] "[36mGET /static/css/forms.css HTTP/1.1[0m" 304 -
2025-10-19 22:15:49,407 [INFO] POST /create took 0.11s
2025-10-19 22:15:49,408 [INFO] 127.0.0.1 - - [19/Oct/2025 22:15:49] "POST /create HTTP/1.1" 200 -
2025-10-19 22:15:49,640 [INFO] GET /static/css/forms.css took 0.0s
2025-10-19 22:15:49,640 [INFO] 127.0.0.1 - - [19/Oct/2025 22:15:49] "[36mGET /static/css/forms.css HTTP/1.1[0m" 304 -
2025-10-19 22:15:56,651 [INFO] GET /login took 0.0s
2025-10-19 22:15:56,651 [INFO] 127.0.0.1 - - [19/Oct/2025 22:15:56] "GET /login HTTP/1.1" 200 -
2025-10-19 22:16:08,048 [INFO] POST /login took 0.11s
2025-10-19 22:16:08,048 [INFO] 127.0.0.1 - - [19/Oct/2025 22:16:08] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-10-19 22:16:08,061 [INFO] GET /main_layout took 0.0s
2025-10-19 22:16:08,061 [INFO] 127.0.0.1 - - [19/Oct/2025 22:16:08] "GET /main_layout HTTP/1.1" 200 -
2025-10-19 22:16:08,265 [INFO] GET /static/css/main.css took 0.0s
2025-10-19 22:16:08,266 [INFO] 127.0.0.1 - - [19/Oct/2025 22:16:08] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 22:16:12,388 [INFO] GET /list_projects took 0.05s
2025-10-19 22:16:12,389 [INFO] 127.0.0.1 - - [19/Oct/2025 22:16:12] "GET /list_projects HTTP/1.1" 200 -
2025-10-19 22:16:46,831 [INFO] GET /main_layout took 0.0s
2025-10-19 22:16:46,831 [INFO] 127.0.0.1 - - [19/Oct/2025 22:16:46] "GET /main_layout HTTP/1.1" 200 -
2025-10-19 22:16:46,854 [INFO] GET /static/css/main.css took 0.0s
2025-10-19 22:16:46,854 [INFO] 127.0.0.1 - - [19/Oct/2025 22:16:46] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 22:16:48,260 [INFO] GET /logout took 0.0s
2025-10-19 22:16:48,260 [INFO] 127.0.0.1 - - [19/Oct/2025 22:16:48] "GET /logout HTTP/1.1" 200 -
2025-10-19 22:16:49,747 [INFO] GET /login took 0.0s
2025-10-19 22:16:49,748 [INFO] 127.0.0.1 - - [19/Oct/2025 22:16:49] "GET /login HTTP/1.1" 200 -
2025-10-19 22:17:01,085 [INFO] POST /login took 0.11s
2025-10-19 22:17:01,086 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:01] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-10-19 22:17:01,093 [INFO] GET /main_layout took 0.0s
2025-10-19 22:17:01,093 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:01] "GET /main_layout HTTP/1.1" 200 -
2025-10-19 22:17:01,514 [INFO] GET /static/css/main.css took 0.0s
2025-10-19 22:17:01,514 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:01] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 22:17:03,583 [INFO] GET /list_projects took 0.02s
2025-10-19 22:17:03,583 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:03] "GET /list_projects HTTP/1.1" 200 -
2025-10-19 22:17:05,213 [INFO] GET /main_layout took 0.0s
2025-10-19 22:17:05,214 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:05] "GET /main_layout HTTP/1.1" 200 -
2025-10-19 22:17:05,239 [INFO] GET /static/css/main.css took 0.0s
2025-10-19 22:17:05,239 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:05] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 22:17:06,845 [INFO] GET /new_project took 0.02s
2025-10-19 22:17:06,845 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:06] "GET /new_project HTTP/1.1" 200 -
2025-10-19 22:17:06,869 [INFO] GET /static/css/forms.css took 0.0s
2025-10-19 22:17:06,869 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:06] "[36mGET /static/css/forms.css?v=1 HTTP/1.1[0m" 304 -
2025-10-19 22:17:19,494 [INFO] POST /new_project took 0.11s
2025-10-19 22:17:19,495 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:19] "POST /new_project HTTP/1.1" 200 -
2025-10-19 22:17:19,510 [INFO] GET /static/css/main.css took 0.0s
2025-10-19 22:17:19,510 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:19] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-10-19 22:17:21,842 [INFO] GET /list_projects took 0.03s
2025-10-19 22:17:21,843 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:21] "GET /list_projects HTTP/1.1" 200 -
2025-10-19 22:17:25,114 [INFO] GET /management_project/2 took 0.07s
2025-10-19 22:17:25,114 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:25] "GET /management_project/2 HTTP/1.1" 200 -
2025-10-19 22:17:26,960 [INFO] GET /delete_project/2 took 0.01s
2025-10-19 22:17:26,960 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:26] "[32mGET /delete_project/2 HTTP/1.1[0m" 302 -
2025-10-19 22:17:27,002 [INFO] GET /list_projects took 0.04s
2025-10-19 22:17:27,002 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:27] "GET /list_projects HTTP/1.1" 200 -
2025-10-19 22:17:30,912 [INFO] GET /management_project/1 took 0.02s
2025-10-19 22:17:30,912 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:30] "GET /management_project/1 HTTP/1.1" 200 -
2025-10-19 22:17:32,257 [INFO] GET /project/1/rights took 0.01s
2025-10-19 22:17:32,258 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:32] "[32mGET /project/1/rights HTTP/1.1[0m" 302 -
2025-10-19 22:17:32,306 [INFO] GET /list_projects took 0.04s
2025-10-19 22:17:32,306 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:32] "GET /list_projects?project_name=&project_type=&depreciation_method= HTTP/1.1" 200 -
2025-10-19 22:17:35,577 [INFO] GET /management_project/2 took 0.06s
2025-10-19 22:17:35,577 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:35] "GET /management_project/2 HTTP/1.1" 200 -
2025-10-19 22:17:37,117 [ERROR] Exception on /project/2/rights [GET]
Traceback (most recent call last):
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/app.py", line 465, in rights_project
    return render_template(
           ^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/venv/lib/python3.12/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/ad/lxhome/j/jesundma/Linux/poistolaskenta/templates/list_projects.html", line 96, in top-level template code
    {% if page > 1 %}
jinja2.exceptions.UndefinedError: 'page' is undefined
2025-10-19 22:17:37,128 [INFO] GET /project/2/rights took 0.17s
2025-10-19 22:17:37,129 [INFO] 127.0.0.1 - - [19/Oct/2025 22:17:37] "[35m[1mGET /project/2/rights HTTP/1.1[0m" 500 -
